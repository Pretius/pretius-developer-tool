pdt.apexSpotlight={initKeyboardShortcuts:function(t){t.eventName="keyboardShortcut",apex.debug.info("apexSpotlight.initKeyBoardShortcuts - pOptions",t);var e=t.enableKeyboardShortcuts,a=t.keyboardShortcuts,i=[];"Y"==e&&(i=a.split(","),Mousetrap.stopCallback=function(t,e,a){return!1},Mousetrap.prototype.stopCallback=function(t,e,a){return!1},Mousetrap.bind(i,function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,pdt.apexSpotlight.pluginHandler(t)}))},setHistorySearchValue:function(t){$(".pdt-apx-Spotlight-input").val(t).trigger("input")},pluginHandler:function(pOptions){var apexSpotlight={DOT:".",SP_DIALOG:"pdt-apx-Spotlight",SP_INPUT:"pdt-apx-Spotlight-input",SP_RESULTS:"pdt-apx-Spotlight-results",SP_ACTIVE:"is-active",SP_SHORTCUT:"pdt-apx-Spotlight-shortcut",SP_ACTION_SHORTCUT:"spotlight-search",SP_RESULT_LABEL:"pdt-apx-Spotlight-label",SP_LIVE_REGION:"pdt-sp-aria-match-found",SP_LIST:"pdt-sp-result-list",KEYS:$.ui.keyCode,URL_TYPES:{redirect:"redirect",searchPage:"search-page"},ICONS:{page:"fa-window-search",search:"icon-search"},gMaxNavResult:50,gWidth:650,gHasDialogCreated:!1,gSearchIndex:[],gStaticIndex:[],gKeywords:"",gAjaxIdentifier:null,gDynamicActionId:null,gPlaceholderText:null,gMoreCharsText:null,gNoMatchText:null,gOneMatchText:null,gMultipleMatchesText:null,gInPageSearchText:null,gSearchHistoryDeleteText:null,gEnableInPageSearch:!0,gEnableDataCache:!1,gEnablePrefillSelectedText:!1,gEnableSearchHistory:!1,gSubmitItemsArray:[],gResultListThemeClass:"",gIconThemeClass:"",gShowProcessing:!1,gPlaceHolderIcon:"a-Icon icon-search",gWaitSpinner$:null,gDefaultText:null,gDataChunked:[],gchunkSize:5e4,gAppLimit:null,vfetchStartTime:new Date,restoreOrigIcon:function(){$(".pdt-spotlight-devbar-entry").removeClass("fa-refresh pdt-prefetching fa-anim-spin").addClass("fa-window-arrow-up")},getSpotlightDataChunked:function(t,e,a){apex.server.plugin(apexSpotlight.gAjaxIdentifier,{pageItems:apexSpotlight.gSubmitItemsArray,x01:"GET_DATA",x02:pdt.opt.applicationGroupName,x03:e,x04:a,x05:apexSpotlight.gAppLimit},{dataType:"json",success:function(i){var p=i.length;apex.debug.info("PDT: Fetched Page Range ["+e+"-"+(e+p-1)+"] of "+p+" row(s)"),apexSpotlight.gDataChunked.push(...i),p==apexSpotlight.gchunkSize?apexSpotlight.getSpotlightDataChunked(t,e+apexSpotlight.gchunkSize,a+apexSpotlight.gchunkSize):(i=apexSpotlight.gDataChunked,pdt.unCloakDebugLevel(),pdt.opt.spotlightPrefetching=!1,apexSpotlight.restoreOrigIcon(),apex.event.trigger("body","pdt-apexspotlight-ajax-success",i),apexSpotlight.gEnableDataCache&&apexSpotlight.setSpotlightDataSessionStorage(JSON.stringify(i)),apexSpotlight.hideWaitSpinner(),t(i))},error:function(e,a,i){pdt.unCloakDebugLevel(),pdt.opt.spotlightPrefetching=!1,apexSpotlight.restoreOrigIcon(),apex.event.trigger("body","pdt-apexspotlight-ajax-error",{message:i}),apex.debug.info("apexSpotlight.getSpotlightData AJAX Error",i),apexSpotlight.hideWaitSpinner(),t([])}})},getSpotlightData:function(t){var e;if(apexSpotlight.gEnableDataCache&&(e=apexSpotlight.getSpotlightDataSessionStorage(),e))return pdt.opt.spotlightPrefetching=!1,apexSpotlight.restoreOrigIcon(),void t(JSON.parse(e));try{apexSpotlight.showWaitSpinner(),pdt.cloakDebugLevel(),apex.debug.info("PDT Fetching Data..."),apexSpotlight.getSpotlightDataChunked(t,1,apexSpotlight.gchunkSize)}catch(e){pdt.unCloakDebugLevel(),pdt.opt.spotlightPrefetching=!1,apexSpotlight.restoreOrigIcon(),apex.event.trigger("body","pdt-apexspotlight-ajax-error",{message:e}),apex.debug.info("apexSpotlight.getSpotlightData AJAX Error",e),apexSpotlight.hideWaitSpinner(),t([])}},getProperApexUrl:function(t,e){try{pdt.cloakDebugLevel(),apex.server.plugin(apexSpotlight.gAjaxIdentifier,{x01:"GET_URL",x02:apexSpotlight.gKeywords,x03:t},{dataType:"json",success:function(t){pdt.unCloakDebugLevel(),apex.debug.info("apexSpotlight.getProperApexUrl AJAX Success",t),e(t)},error:function(a,i,p){pdt.unCloakDebugLevel(),apex.debug.info("apexSpotlight.getProperApexUrl AJAX Error",p),e({url:t})}})}catch(a){pdt.unCloakDebugLevel(),apex.debug.info("apexSpotlight.getProperApexUrl AJAX Error",a),e({url:t})}},setSpotlightDataSessionStorage:function(t){var e=apex.storage.hasSessionStorageSupport();if(e){var a=$v("pInstance"),i=apex.storage.getScopedSessionStorage({prefix:"pdtApexSpotlight",useAppId:!0});for(let t in i._store)t.endsWith("pdtSpotlightData")&&(t=t.replace(/^pdtApexSpotlight\./,""),i.removeItem(t));const e=pako.deflate(JSON.stringify(t)),p=46656,o=[];for(let t=0;t<e.length;t+=p){const a=e.slice(t,t+p),i=btoa(String.fromCharCode.apply(null,a));o.push(i)}const l=o.join("");i.setItem(a+".pdtSpotlightData",l)}},getSpotlightDataSessionStorage:function(){var t,e=apex.storage.hasSessionStorageSupport();if(e){var a=$v("pInstance"),i=apex.storage.getScopedSessionStorage({prefix:"pdtApexSpotlight",useAppId:!0});if(encStorageValue=i.getItem(a+".pdtSpotlightData"),encStorageValue){const e=atob(encStorageValue),a=e.split("").map(function(t){return t.charCodeAt(0)}),i=new Uint8Array(a);t=JSON.parse(pako.inflate(i,{to:"string"}))}}return t},setSpotlightHistoryLocalStorage:function(t){var e=apex.storage.hasLocalStorageSupport(),a=[],i=function(t){var e={};return t.forEach(function(t){e[t]||(e[t]=!0)}),Object.keys(e)},p=function(t){for(var e=0;e<t.length;e++)e>30&&t.splice(e,1);return t};if(isNaN(t)&&(a=apexSpotlight.getSpotlightHistoryLocalStorage(),a.unshift(t.trim()),a=i(a),a=p(a),e)){var o=apex.storage.getScopedLocalStorage({prefix:"apexSpotlight",useAppId:!0});o.setItem(apexSpotlight.gDynamicActionId+".history",JSON.stringify(a))}},getSpotlightHistoryLocalStorage:function(){var t,e=apex.storage.hasLocalStorageSupport(),a=[];if(e){var i=apex.storage.getScopedLocalStorage({prefix:"apexSpotlight",useAppId:!0});t=i.getItem(apexSpotlight.gDynamicActionId+".history"),t&&(a=JSON.parse(t))}return a},removeSpotlightHistoryLocalStorage:function(){var t=apex.storage.hasLocalStorageSupport();if(t){var e=apex.storage.getScopedLocalStorage({prefix:"apexSpotlight",useAppId:!0});e.removeItem(apexSpotlight.gDynamicActionId+".history")}},showTippyHistoryPopover:function(){var t=apexSpotlight.getSpotlightHistoryLocalStorage()||[],e="",a=0;if(t.length>0){apexSpotlight.destroyTippyHistoryPopover(),$("div.pdt-apx-Spotlight-icon-main").css("cursor","pointer"),e+='<ul class="spotlight-history-list">';for(var i=0;i<t.length&&(e+='<li><a class="spotlight-history-link" href="javascript:pdt.apexSpotlight.setHistorySearchValue(\''+apex.util.escapeHTML(t[i])+"');\">"+apex.util.escapeHTML(t[i])+"</a></li>",a+=1,!(a>=20));i++);e+='<li><a class="spotlight-history-delete" href="javascript:void(0);"><i>'+apexSpotlight.gSearchHistoryDeleteText+"</i></a></li>",e+="</ul>",tippy($("div.pdt-apx-Spotlight-icon-main")[0],{content:e,interactive:!0,arrow:!0,placement:"right-end",animateFill:!1}),$("body").on("click","a.spotlight-history-link",function(){apexSpotlight.hideTippyHistoryPopover()}),$("body").on("click","a.spotlight-history-delete",function(){apexSpotlight.destroyTippyHistoryPopover(),apexSpotlight.removeSpotlightHistoryLocalStorage()})}},hideTippyHistoryPopover:function(){var t=$("div.pdt-apx-Spotlight-icon-main")[0];t&&t._tippy&&t._tippy.hide()},destroyTippyHistoryPopover:function(){var t=$("div.pdt-apx-Spotlight-icon-main")[0];t&&t._tippy&&t._tippy.destroy(),$(apexSpotlight.DOT+apexSpotlight.SP_INPUT).focus()},showWaitSpinner:function(){apexSpotlight.gShowProcessing&&$("div.pdt-apx-Spotlight-icon-main span").prop("className","").addClass("fa fa-refresh fa-anim-spin")},hideWaitSpinner:function(){apexSpotlight.gShowProcessing&&$("div.pdt-apx-Spotlight-icon-main span").prop("className","").addClass(apexSpotlight.gPlaceHolderIcon)},getSelectedText:function(){var t;return window.getSelection?(t=window.getSelection(),t.toString().trim()):document.selection.createRange?(t=document.selection.createRange(),t.text.trim()):void 0},setSelectedText:function(t){var e;e=t||apexSpotlight.getSelectedText(),e&&(apexSpotlight.gHasDialogCreated?$(apexSpotlight.DOT+apexSpotlight.SP_INPUT).val(e).trigger("input"):$("body").on("pdt-apexspotlight-get-data",function(){$(apexSpotlight.DOT+apexSpotlight.SP_INPUT).val(e).trigger("input")}))},redirect:function(t){if(apexSpotlight.gShowProcessing)try{t.startsWith("javascript:")?apex.navigation.redirect(t):(0==$("span.u-Processing").length&&t.startsWith("f?p=")&&apex.page.validate()&&!apex.page.isChanged()&&(apexSpotlight.gWaitSpinner$=apex.util.showSpinner($("body"))),apex.navigation.redirect(t))}catch(e){apexSpotlight.gWaitSpinner$&&apexSpotlight.gWaitSpinner$.remove(),apex.navigation.redirect(t)}else apex.navigation.redirect(t)},handleAriaAttr:function(){var t=$(apexSpotlight.DOT+apexSpotlight.SP_RESULTS),e=$(apexSpotlight.DOT+apexSpotlight.SP_INPUT),a=t.find(apexSpotlight.DOT+apexSpotlight.SP_ACTIVE).find(apexSpotlight.DOT+apexSpotlight.SP_RESULT_LABEL).attr("id"),i=$("#"+a),p=i.text(),o=t.find("li"),l=0!==o.length,r="",g=o.filter(function(){return 0===$(this).find(apexSpotlight.DOT+apexSpotlight.SP_SHORTCUT).length}).length;$(apexSpotlight.DOT+apexSpotlight.SP_RESULT_LABEL).attr("aria-selected","false"),i.attr("aria-selected","true"),""===apexSpotlight.gKeywords?r=apexSpotlight.gMoreCharsText:0===g?r=apexSpotlight.gNoMatchText:1===g?r=apexSpotlight.gOneMatchText:g>1&&(r=g+" "+apexSpotlight.gMultipleMatchesText),r=p+", "+r,$("#"+apexSpotlight.SP_LIVE_REGION).text(r),e.attr("aria-activedescendant",a).attr("aria-expanded",l)},closeDialog:function(){$(apexSpotlight.DOT+apexSpotlight.SP_DIALOG).dialog("close")},resetSpotlight:function(){$("#"+apexSpotlight.SP_LIST).empty(),$(apexSpotlight.DOT+apexSpotlight.SP_INPUT).val(""),apexSpotlight.gKeywords="",apexSpotlight.handleAriaAttr()},goTo:function(t,e){var a=t.data("url"),i=t.data("type");switch(i){case apexSpotlight.URL_TYPES.searchPage:apexSpotlight.inPageSearch();break;case apexSpotlight.URL_TYPES.redirect:a.includes("~SEARCH_VALUE~")?(apexSpotlight.gKeywords=apexSpotlight.gKeywords.replace(/:|,|"|'/g," ").trim(),a.startsWith("f?p=")?apexSpotlight.getProperApexUrl(a,function(t){apexSpotlight.redirect(t.url)}):(a=a.replace("~SEARCH_VALUE~",apexSpotlight.gKeywords),apexSpotlight.redirect(a))):a.includes("~WINDOW~")?(a=e.ctrlKey||e.metaKey?a.replace("~WINDOW~","true"):a.replace("~WINDOW~","false"),apexSpotlight.redirect(a)):apexSpotlight.redirect(a)}apexSpotlight.closeDialog()},getMarkup:function(t){var e,a=t.title,i=t.desc||"",p=t.url,o=t.type,l=t.icon,r=t.iconColor,g=t.shortcut,n=t.static,s=g?'<span class="'+apexSpotlight.SP_SHORTCUT+'" >'+g+"</span>":"",h="",S="",c="",d="";return(0===p||p)&&(h='data-url="'+p+'" '),o&&(h=h+' data-type="'+o+'" '),S=l.startsWith("fa-")?"fa "+l:l.startsWith("icon-")?"a-Icon "+l:"a-Icon icon-search",c=n?"STATIC":"DYNAMIC",r&&(d='style="background-color:'+r+'"'),e='<li class="pdt-apx-Spotlight-result '+apexSpotlight.gResultListThemeClass+" pdt-apx-Spotlight-result--page pdt-apx-Spotlight-"+c+'"><span class="pdt-apx-Spotlight-link" '+h+'><span class="pdt-apx-Spotlight-icon '+apexSpotlight.gIconThemeClass+'" '+d+' aria-hidden="true"><span class="'+S+'"></span></span><span class="pdt-apx-Spotlight-info"><span class="'+apexSpotlight.SP_RESULT_LABEL+'" role="option">'+a+'</span><span class="pdt-apx-Spotlight-desc margin-top-sm">'+i+"</span></span>"+s+"</span></li>",e},resultsAddOns:function(t){var e=0;apexSpotlight.gEnableInPageSearch&&(t.push({n:apexSpotlight.gInPageSearchText,u:"",i:apexSpotlight.ICONS.page,ic:null,t:apexSpotlight.URL_TYPES.searchPage,shortcut:"Ctrl + 1",s:!0}),e+=1);for(var a=0;a<apexSpotlight.gStaticIndex.length;a++)e+=1,e>9?t.push({n:apexSpotlight.gStaticIndex[a].n,d:apexSpotlight.gStaticIndex[a].d,u:apexSpotlight.gStaticIndex[a].u,i:apexSpotlight.gStaticIndex[a].i,ic:apexSpotlight.gStaticIndex[a].ic,t:apexSpotlight.gStaticIndex[a].t,s:apexSpotlight.gStaticIndex[a].s}):t.push({n:apexSpotlight.gStaticIndex[a].n,d:apexSpotlight.gStaticIndex[a].d,u:apexSpotlight.gStaticIndex[a].u,i:apexSpotlight.gStaticIndex[a].i,ic:apexSpotlight.gStaticIndex[a].ic,t:apexSpotlight.gStaticIndex[a].t,s:apexSpotlight.gStaticIndex[a].s,shortcut:"Ctrl + "+e});return t},searchNav:function(t){var e,a,i=[],p=!1,o=t.length,l=$(apexSpotlight.DOT+apexSpotlight.SP_INPUT).val().trim(),r=":"+apex.item("R0_SPOTLIGHT_FILTER").getValue()+":",g=function(){return p?i:apexSpotlight.gSearchIndex},n=function(t,e,a){var i,p=100,o=e-1;return 0===t&&0===o?p:(i=a.indexOf(apexSpotlight.gKeywords),-1===i?p=p-t-o-e:p-=i,p)};for(a=0;a<t.length;a++)e=t[a],i=g().filter(function(t,a){var i=t.n.toLowerCase(),p=t.c,g=t.x,s=i.split(" ").length,h=i.search(e);if(l==g)return!0;if(o>s)return!1;if(!p.includes(r))return!1;if(h>-1){if(t.score=n(h,s,i),apex)return!0}else if(t.t&&t.t.search(e)>-1)return t.score=1,!0}).sort(function(t,e){return e.score-t.score}),p=!0;var s=function(t){var e,a,i,p,o,l,r,g="",n={};for(t.length>apexSpotlight.gMaxNavResult&&(t.length=apexSpotlight.gMaxNavResult),e=0;e<t.length;e++)a=t[e],p=a.shortcutlink,i=a.t||apexSpotlight.URL_TYPES.redirect,o=a.i||apexSpotlight.ICONS.search,r=a.s||!1,"DEFAULT"!==a.ic&&(l=a.ic),n={title:a.n,desc:a.d,url:a.u,icon:o,iconColor:l,type:i,static:r},p&&(n.shortcut=p),g+=apexSpotlight.getMarkup(n);return g};return s(apexSpotlight.resultsAddOns(i))},search:function(t){var e="pdt-sp-result-";apexSpotlight.gKeywords=t.trim();var a,i,p=apexSpotlight.gKeywords.split(" "),o=($(apexSpotlight.DOT+apexSpotlight.SP_RESULTS),[]);for(i=0;i<p.length;i++)o.push(new RegExp("(?<!</?[a-z][^>]*?>)("+apex.util.escapeRegExp(p[i])+")(?![^<]*?>)","gi"));a=apexSpotlight.searchNav(o),$("#"+apexSpotlight.SP_LIST).html(a).find("li").each(function(t){var a=$(this);a.find(apexSpotlight.DOT+apexSpotlight.SP_RESULT_LABEL).attr("id",e+t)}).first().addClass(apexSpotlight.SP_ACTIVE)},createSpotlightDialog:function(pPlaceHolder){var createDialog=function(){function ellispsesTrim(t,e){return t.length<=e?t:t.substr(0,e-3)+"..."}var viewHeight,lineHeight,viewTop,rowsPerView,initHeights=function(){if($(apexSpotlight.DOT+apexSpotlight.SP_DIALOG).length>0){var t=$("div.pdt-apx-Spotlight-results");viewHeight=t.outerHeight(),lineHeight=$("li.pdt-apx-Spotlight-result").outerHeight(),viewTop=t.offset().top,rowsPerView=viewHeight/lineHeight}},scrolledDownOutOfView=function(t){if(t[0]){var e=t.offset().top;return e<0||e>viewHeight}},scrolledUpOutOfView=function(t){if(t[0]){var e=t.offset().top;return e>viewHeight||e<=viewTop}},getNext=function(t){var e,a=t.find(apexSpotlight.DOT+apexSpotlight.SP_ACTIVE),i=a.index();rowsPerView||initHeights(),!a.length||a.is(":last-child")?(a.removeClass(apexSpotlight.SP_ACTIVE),t.find("li").first().addClass(apexSpotlight.SP_ACTIVE),t.animate({scrollTop:0})):(e=a.removeClass(apexSpotlight.SP_ACTIVE).next().addClass(apexSpotlight.SP_ACTIVE),scrolledDownOutOfView(e)&&t.animate({scrollTop:(i-rowsPerView+2)*lineHeight},0))},getPrev=function(t){var e,a=t.find(apexSpotlight.DOT+apexSpotlight.SP_ACTIVE),i=a.index();rowsPerView||initHeights(),!t.length||a.is(":first-child")?(a.removeClass(apexSpotlight.SP_ACTIVE),t.find("li").last().addClass(apexSpotlight.SP_ACTIVE),t.animate({scrollTop:t.find("li").length*lineHeight})):(e=a.removeClass(apexSpotlight.SP_ACTIVE).prev().addClass(apexSpotlight.SP_ACTIVE),scrolledUpOutOfView(e)&&t.animate({scrollTop:(i-1)*lineHeight},0))};$(window).on("apexwindowresized",function(){initHeights()});var spotlightRadioFilter='<div class="container"><div class="row "><div class="col col-12 apex-col-auto col-start col-end"><div class="t-Form-fieldContainer t-Form-fieldContainer--floatingLabel t-Form-fieldContainer--stretchInputs t-Form-fieldContainer--radioButtonGroup apex-item-wrapper apex-item-wrapper--radiogroup " id="R0_SPOTLIGHT_FILTER_CONTAINER"><div class="t-Form-labelContainer"></div><div class="t-Form-inputContainer padding-none"><div class="t-Form-itemWrapper"><div tabindex="-1" id="R0_SPOTLIGHT_FILTER" aria-labelledby="R0_SPOTLIGHT_FILTER_LABEL" class="radio_group apex-item-group apex-item-group--rc apex-item-radio margin-top-none pdt-revealer-ignore" role="group"><div class="apex-item-grid radio_group"><div class="apex-item-grid-row"><div class="apex-item-option"><input type="radio" id="R0_SPOTLIGHT_FILTER_0" name="R0_SPOTLIGHT_FILTER" data-display="This App" value="APP" checked="checked"><label class="u-radio padding-top-none padding-bottom-none pdt-spt-lbl" for="R0_SPOTLIGHT_FILTER_0">This App</label></div><div class="apex-item-option"><input type="radio" id="R0_SPOTLIGHT_FILTER_1" name="R0_SPOTLIGHT_FILTER" data-display="Workspace Apps" value="WS"><label class="u-radio padding-top-none padding-bottom-none pdt-spt-lbl" for="R0_SPOTLIGHT_FILTER_1">Workspace Apps</label></div><div class="apex-item-option"><input type="radio" id="R0_SPOTLIGHT_FILTER_2" name="R0_SPOTLIGHT_FILTER" data-display="Application Group" value="AG"><label class="u-radio padding-top-none padding-bottom-none pdt-spt-lbl" for="R0_SPOTLIGHT_FILTER_2">Group: %0</label></div></div></div></div></div><span id="R0_SPOTLIGHT_FILTER_error_placeholder" class="a-Form-error" data-template-id=""></span></div></div></div></div></div>';spotlightRadioFilter=apex.lang.formatNoEscape(spotlightRadioFilter,ellispsesTrim(pdt.opt.applicationGroupName,40)),$("body").append('<div class="'+apexSpotlight.SP_DIALOG+'" data-id="'+apexSpotlight.gDynamicActionId+'"><div class="pdt-apx-Spotlight-body"><div class="pdt-apx-Spotlight-header">'+spotlightRadioFilter+'</div><div class="pdt-apx-Spotlight-search"><div class="pdt-apx-Spotlight-icon pdt-apx-Spotlight-icon-main"><span class="'+apexSpotlight.gPlaceHolderIcon+'" aria-hidden="true"></span></div><div class="pdt-apx-Spotlight-field"><input type="text" role="combobox" aria-expanded="false" aria-autocomplete="none" aria-haspopup="true" aria-label="Spotlight Search" aria-owns="'+apexSpotlight.SP_LIST+'" autocomplete="off" autocorrect="off" spellcheck="false" class="'+apexSpotlight.SP_INPUT+'" placeholder="'+pPlaceHolder+'"></div><div role="region" class="u-VisuallyHidden" aria-live="polite" id="'+apexSpotlight.SP_LIVE_REGION+'"></div></div><div class="'+apexSpotlight.SP_RESULTS+'"><ul class="pdt-apx-Spotlight-resultsList" id="'+apexSpotlight.SP_LIST+'" tabindex="-1" role="listbox"></ul></div></div></div>').on("input",apexSpotlight.DOT+apexSpotlight.SP_INPUT,function(){var t=$(this).val().trim(),e=t.length;0===e?apexSpotlight.resetSpotlight():(e>=1||!isNaN(t))&&t!==apexSpotlight.gKeywords&&apexSpotlight.search(t)}).on("change","#R0_SPOTLIGHT_FILTER",function(t){apexSpotlight.search($(apexSpotlight.DOT+apexSpotlight.SP_INPUT).val().trim()),$(apexSpotlight.DOT+apexSpotlight.SP_INPUT).trigger("input")}).on("keydown",apexSpotlight.DOT+apexSpotlight.SP_DIALOG,function(t){var e,a,i=$(apexSpotlight.DOT+apexSpotlight.SP_RESULTS);switch(t.which){case apexSpotlight.KEYS.DOWN:t.preventDefault(),getNext(i);break;case apexSpotlight.KEYS.UP:t.preventDefault(),getPrev(i);break;case apexSpotlight.KEYS.ENTER:t.preventDefault(),apexSpotlight.gEnableSearchHistory&&apexSpotlight.setSpotlightHistoryLocalStorage($(apexSpotlight.DOT+apexSpotlight.SP_INPUT).val()),apexSpotlight.goTo(i.find("li.is-active span"),t);break;case apexSpotlight.KEYS.TAB:apexSpotlight.closeDialog()}if(t.ctrlKey){switch(e=i.find(apexSpotlight.DOT+apexSpotlight.SP_SHORTCUT).parent().get(),t.which){case 49:a=1;break;case 50:a=2;break;case 51:a=3;break;case 52:a=4;break;case 53:a=5;break;case 54:a=6;break;case 55:a=7;break;case 56:a=8;break;case 57:a=9}a&&apexSpotlight.goTo($(e[a-1]),t)}t.shiftKey&&t.which===apexSpotlight.KEYS.TAB&&apexSpotlight.closeDialog(),apexSpotlight.handleAriaAttr()}).on("click","span.pdt-apx-Spotlight-link",function(t){apexSpotlight.gEnableSearchHistory&&apexSpotlight.setSpotlightHistoryLocalStorage($(apexSpotlight.DOT+apexSpotlight.SP_INPUT).val()),apexSpotlight.goTo($(this),t)}).on("mousemove","li.pdt-apx-Spotlight-result",function(){var t=$(this);t.parent().find(apexSpotlight.DOT+apexSpotlight.SP_ACTIVE).removeClass(apexSpotlight.SP_ACTIVE),t.addClass(apexSpotlight.SP_ACTIVE)}).on("blur",apexSpotlight.DOT+apexSpotlight.SP_DIALOG,function(t){$(apexSpotlight.DOT+apexSpotlight.SP_DIALOG).dialog("isOpen")&&$(apexSpotlight.DOT+apexSpotlight.SP_INPUT).focus()}).on("click",".pdt-apx-Spotlight-inline-link",function(e){const url=this.getAttribute("pdt-Spotlink-url");return pdt.cloakDebugLevel(),apex.server.plugin(apexSpotlight.gAjaxIdentifier,{x01:"GET_URL",x02:url},{dataType:"json",success:function(data){if(pdt.unCloakDebugLevel(),data){var preparedUrl=data.url;if(preparedUrl.startsWith("javascript:")){apexSpotlight.closeDialog();const code=preparedUrl.slice(11);eval(code)}else window.location.href=preparedUrl}},error:function(t,e,a){pdt.unCloakDebugLevel(),apex.debug.info("pdt apexSpotlight GET_URL",a)}}),!1}),$(apexSpotlight.DOT+apexSpotlight.SP_DIALOG).on("keydown",function(t){var e=$(apexSpotlight.DOT+apexSpotlight.SP_INPUT);t.which===apexSpotlight.KEYS.ESCAPE&&(e.val()?(apexSpotlight.resetSpotlight(),t.stopPropagation()):apexSpotlight.closeDialog())}),apexSpotlight.gHasDialogCreated=!0};createDialog()},openSpotlightDialog:function(t){if(window.self!==window.top)return!1;apexSpotlight.gHasDialogCreated=$(apexSpotlight.DOT+apexSpotlight.SP_DIALOG).length>0,apexSpotlight.gHasDialogCreated&&$(apexSpotlight.DOT+apexSpotlight.SP_DIALOG).attr("data-id")!=apexSpotlight.gDynamicActionId&&(apexSpotlight.resetSpotlight(),$(apexSpotlight.DOT+apexSpotlight.SP_DIALOG).remove(),apexSpotlight.gHasDialogCreated=!1),apexSpotlight.gEnablePrefillSelectedText&&apexSpotlight.setSelectedText(),apexSpotlight.gEnableDefaultText&&(apexSpotlight.setSelectedText(apexSpotlight.defaultText),$("body").trigger("pdt-apexspotlight-get-data"));var e=function(){var t=$(apexSpotlight.DOT+apexSpotlight.SP_DIALOG),e=window.scrollY||window.pageYOffset;t.hasClass("ui-dialog-content")&&t.dialog("isOpen")||t.dialog({width:apexSpotlight.gWidth,height:"auto",modal:!0,position:{my:"center top",at:"center top+"+(e+64),of:$("body")},dialogClass:"ui-dialog--pdt-apexspotlight",open:function(){apex.event.trigger("body","pdt-apexspotlight-open-dialog");var t=$(this);t.css("min-height","auto").prev(".ui-dialog-titlebar").remove(),apex.navigation.beginFreezeScroll(),apexSpotlight.gEnableSearchHistory&&apexSpotlight.showTippyHistoryPopover(),$(".ui-widget-overlay").on("click",function(){apexSpotlight.closeDialog()}),$(apexSpotlight.DOT+apexSpotlight.SP_INPUT).focus()},create:function(){},close:function(){apex.event.trigger("body","pdt-apexspotlight-close-dialog"),apexSpotlight.resetSpotlight(),apex.navigation.endFreezeScroll(),apexSpotlight.gEnableSearchHistory&&apexSpotlight.destroyTippyHistoryPopover()}})};apexSpotlight.gHasDialogCreated?e():(apexSpotlight.createSpotlightDialog(apexSpotlight.gPlaceholderText),e(),apexSpotlight.getSpotlightData(function(t){apexSpotlight.gSearchIndex=$.grep(t,function(t){return 0==t.s}),apexSpotlight.gStaticIndex=$.grep(t,function(t){return 1==t.s}),apex.event.trigger("body","pdt-apexspotlight-get-data")})),focusElement=t},inPageSearch:function(t){var e=t||apexSpotlight.gKeywords;$("body").unmark({done:function(){apexSpotlight.closeDialog(),apexSpotlight.resetSpotlight(),$("body").mark(e,{}),apex.event.trigger("body","apexspotlight-inpage-search",{keyword:e})}})},hasSearchResultsDynamicEntries:function(){var t=$("li.pdt-apx-Spotlight-result").hasClass("pdt-apx-Spotlight-DYNAMIC")||!1;return t},pluginHandler:function(t){var e=apexSpotlight.gDynamicActionId=t.dynamicActionId,a=apexSpotlight.gAjaxIdentifier=t.ajaxIdentifier,i=t.eventName,p=t.fireOnInit,o=apexSpotlight.gPlaceholderText=t.placeholderText,l=apexSpotlight.gMoreCharsText=t.moreCharsText,r=apexSpotlight.gNoMatchText=t.noMatchText,g=apexSpotlight.gOneMatchText=t.oneMatchText,n=apexSpotlight.gMultipleMatchesText=t.multipleMatchesText,s=apexSpotlight.gInPageSearchText=t.inPageSearchText,h=apexSpotlight.gSearchHistoryDeleteText=t.searchHistoryDeleteText,S=t.enableKeyboardShortcuts,c=t.keyboardShortcuts,d=t.submitItems,x=t.enableInPageSearch,u=apexSpotlight.gMaxNavResult=t.maxNavResult,f=apexSpotlight.gWidth=t.width,T=t.enableDataCache,v=t.spotlightTheme,I=t.enablePrefillSelectedText,P=t.showProcessing,y=t.placeHolderIcon,m=t.enableSearchHistory,D=apexSpotlight.gDefaultText=t.defaultText,b=apexSpotlight.gAppLimit=t.appLimit,_=!0;let L={};switch(L.dynamicActionId=e,L.ajaxIdentifier=a,L.eventName=i,L.fireOnInit=p,L.placeholderText=o,L.moreCharsText=l,L.noMatchText=r,L.oneMatchText=g,L.multipleMatchesText=n,L.inPageSearchText=s,L.searchHistoryDeleteText=h,L.enableKeyboardShortcuts=S,L.keyboardShortcuts=c,L.submitItems=d,L.enableInPageSearch=x,L.maxNavResult=u,L.width=f,L.enableDataCache=T,L.spotlightTheme=v,L.enablePrefillSelectedText=I,L.showProcessing=P,L.placeHolderIcon=y,L.enableSearchHistory=m,L.appLimit=b,apex.debug.info({pdtSpotlightOptions:L}),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t}),String.prototype.includes||(String.prototype.includes=function(t,e){"use strict";return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),apexSpotlight.gEnableInPageSearch="Y"==x,apexSpotlight.gEnableDataCache="Y"==T,apexSpotlight.gEnablePrefillSelectedText="Y"==I,apexSpotlight.gShowProcessing="Y"==P,apexSpotlight.gEnableSearchHistory="Y"==m,apexSpotlight.gEnableDefaultText=!!D,apexSpotlight.defaultText=D,d&&(apexSpotlight.gSubmitItemsArray=d.split(",")),v){case"ORANGE":apexSpotlight.gResultListThemeClass="pdt-apx-Spotlight-result-orange",apexSpotlight.gIconThemeClass="pdt-apx-Spotlight-icon-orange";break;case"RED":apexSpotlight.gResultListThemeClass="pdt-apx-Spotlight-result-red",apexSpotlight.gIconThemeClass="pdt-apx-Spotlight-icon-red";break;case"DARK":apexSpotlight.gResultListThemeClass="pdt-apx-Spotlight-result-dark",apexSpotlight.gIconThemeClass="pdt-apx-Spotlight-icon-dark"}apexSpotlight.gPlaceHolderIcon="DEFAULT"===y?"a-Icon icon-search":"fa "+y,_="keyboardShortcut"==i||"Y"==p||"ready"!=i,$("body").on("pdt-apexspotlight-get-data",function(){if(apexSpotlight.gHasDialogCreated&&!apexSpotlight.hasSearchResultsDynamicEntries()){var t=$(apexSpotlight.DOT+apexSpotlight.SP_INPUT).val().trim();t&&(apexSpotlight.search(t),$(apexSpotlight.DOT+apexSpotlight.SP_INPUT).trigger("input"))}}),$("body").on("pdt-apexspotlight-prefetch-data",function(){pdt.opt.spotlightPrefetching=!0,$(".pdt-spotlight-devbar-entry").addClass("fa-refresh pdt-prefetching fa-anim-spin"),apexSpotlight.vfetchStartTime=new Date,apexSpotlight.getSpotlightData(function(t){const e=new Date,a=e-apexSpotlight.vfetchStartTime;apex.debug.info("Spotlight Data Ready in "+a+"ms")})}),_&&apexSpotlight.openSpotlightDialog()}};apexSpotlight.pluginHandler(pOptions)}};